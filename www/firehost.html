<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <!--<link rel="stylesheet" type="text/css" href="css/fh.css" />-->
        <link rel="stylesheet" type="text/css" href="css/index.css" />
		<link rel="stylesheet" type="text/css" href="http://code.jquery.com/mobile/1.3.0-beta.1/jquery.mobile-1.3.0-beta.1.min.css" />
		<script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
		<script src="http://code.jquery.com/mobile/1.3.0-beta.1/jquery.mobile-1.3.0-beta.1.min.js"></script>
		<!--Need to always call phonegap-->
		<script type="text/javascript" src="cordova.js" rel="external"></script>
		<!--Prepare my js file for calling, essentially a 'require'-->
		<script type="text/javascript" src="js/apiget.js" rel="external"></script>
		<script type="text/javascript">
			function quit(){
        		navigator.app.exitApp();
    		}
    	</script>
    	<script type="text/javascript">
    		function logout(){
    			localStorage.removeItem('key');
    			window.location.href = '#mainpage';
    			alert(localStorage.getItem('key'));
    		}
    	</script>
        <title>FireHost Customer Portal</title>
    </head>
    <body>
    	<div data-role="page" id="mainpage" data-theme="a">
    		<script type="text/javascript">
    			apiget.test();
    		</script>
	    	<div data-role="header">
				<div>
					<h1>
						FireHost Customer Portal
					</h1>
				</div>
			</div>
			<div data-role="content">
				<h2>
					<form>
						<label for="username">Username</label>
						<input type="email" data-clear-btn="true" name="username" id="username" value="">
						</br>
						<label for="password">Password</label>
						<input type="password" data-clear-btn="true" name="password" id="password" value="">
						</br>
						<label for="tenant">Account Number</label>
						<input type="text" data-clear-btn="true" name="tenant" id="tenant" value="" maxlength="6">
						</br>
						<a id="submit" data-role="button">Login</a>
					</form>
				</h2>
			</div>
			<script type="text/javascript">
				$(function(){
					$('#submit').click(function(){
					//alert('button click');
					//$.post("https://api.firehost.com/api/login", {"userName": username,"password": password, "tenant": tenant }, function(data){
					//	alert (data);
					//}, "json");
						$.ajax({
							type : "post", 
							url : "https://api.firehost.com/api/login", 
							data : JSON.stringify({
								userName : $('#username').val(), 
								password: $('#password').val(), 
								tenant : $('#tenant').val().toUpperCase()}), 
							processData: false, 
							async: false,
							contentType: "application/json",
							success: function(s){
						  		var loginresponse = JSON.stringify(s)
						  		var stringresponse = $.parseJSON(loginresponse);
						  		var token = stringresponse.result.token
						  		localStorage.setItem('key', token);
						  		//alert(localStorage.getItem('key'));
						  		window.location.replace("#dashboard")
						  	},
						  	error: function(e){
						  		var loginresponse = JSON.stringify(e)
						  			console.log('loginresponse ' + loginresponse);
						  		var stringresponse = $.parseJSON(loginresponse);
						  			console.log('stringresponse' + stringresponse);
						  		var errorresponse = stringresponse.responseText
						  			console.log('errorresponse ' + errorresponse)
						  		var stringerrorresponse = $.parseJSON(errorresponse);
						  			console.log('stringerrorresponse ' + stringerrorresponse);
						  		var errormsg = JSON.stringify(stringerrorresponse.error)
						  			console.log('error ' + errormsg)
						  		var stringerrormsg = $.parseJSON(errormsg);
						  			console.log('stringerrormsg ' + stringerrormsg);
						  		var errormsgmsg = JSON.stringify(stringerrormsg)
						  			console.log('errormsgmsg ' + errormsgmsg);
						  		var stringerrormsgmsg = $.parseJSON(errormsg);
						  			console.log('stringerrormsgmsg ' + stringerrormsgmsg.message);
						  		alert (stringerrormsg.message);
						  	}
						});
					});
				});
			</script>
			<script>
				$( document ).on( "pageinit", "#mainpage", function() {
	    			$( document ).on( "swipeleft swiperight", "#mainpage", function( e ) {
		       			// We check if there is no open panel on the page because otherwise
		        		// a swipe to close the left panel would also open the right panel (and v.v.).
				        // We do this by checking the data that the framework stores on the page element (panel: open).
				        if ( $.mobile.activePage.jqmData( "panel" ) !== "open" ) {
				            if ( e.type === "swipeleft"  ) {
				                $( "#mainmenu" ).panel( "close" );
				            } else if ( e.type === "swiperight" ) {
				                $( "#mainmenu" ).panel( "open" );
				            }
				        }
			    	});
				});
			</script>
			<div data-role="panel" id="mainmenu" data-theme="c">
				<a data-role="button" onClick="quit()">Quit</a>
    		</div>
		</div>
    	<div data-role="page" id="dashboard">
	    	<div data-role="header">
				<div>
					<h1>
						FireHost Customer Portal Dashboard</br>Company Name
					</h1>
				</div>
			</div>
			<div data-role="content">
				<h2>
					****Give Me Content****
				</h2>
			</div>
			<script>
				$( document ).on( "pageinit", "#dashboard", function() {
	    			$( document ).on( "swipeleft swiperight", "#dashboard", function( e ) {
		       			// We check if there is no open panel on the page because otherwise
		        		// a swipe to close the left panel would also open the right panel (and v.v.).
				        // We do this by checking the data that the framework stores on the page element (panel: open).
				        if ( $.mobile.activePage.jqmData( "panel" ) !== "open" ) {
				            if ( e.type === "swipeleft"  ) {
				                $( "#dashmenu" ).panel( "close" );
				            } else if ( e.type === "swiperight" ) {
				                $( "#dashmenu" ).panel( "open" );
				            }
				        }
			    	});
				});
			</script>
			<div data-role="panel" id="dashmenu" data-theme="a">
				<a href="#tickets" data-role="button">Tickets</a>
				<a href="#services" data-role="button">Services</a>
				<a href="#security" data-role="button">Security</a>
				<a href="#network" data-role="button">Network</a>
				<a href="#partner" data-role="button">Partner</a>
				<a href="#account" data-role="button">Account</a>
				</br>
				<a data-role="button" onClick="logout()">Logout</a>
				<a data-role="button" onClick="quit()">Quit</a>
    		</div>
    	</div>
    	<div data-role="page" id="tickets">
	    	<div data-role="header">
				<div>
					<h1>
						FireHost Customer Portal Tickets</br>Company Name
					</h1>
				</div>
			</div>
			<div data-role="content">
				<ul class="ticketList" data-role="listview">
					<div id="ticketitems" data-role="content" class="center">
					</div>
				</ul>
			</div>
			<script>
				$( document ).on( "pageinit", "#tickets", function() {
	    			$( document ).on( "swipeleft swiperight", "#tickets", function( e ) {
		       			// We check if there is no open panel on the page because otherwise
		        		// a swipe to close the left panel would also open the right panel (and v.v.).
				        // We do this by checking the data that the framework stores on the page element (panel: open).
				        if ( $.mobile.activePage.jqmData( "panel" ) !== "open" ) {
				            if ( e.type === "swipeleft"  ) {
				                $( "#ticketsmenu" ).panel( "close" );
				            } else if ( e.type === "swiperight" ) {
				                $( "#ticketsmenu" ).panel( "open" );
				            }
				        }
			    	});
				});
			</script>
			<script type="text/javascript">
				$(document).on("pageinit", "#tickets", function(){
					apiget.ticketlist();
				});
			</script>
			<div data-role="panel" id="ticketsmenu" data-theme="a">
				<a href="#dashboard" data-role="button">Dashboard</a>
				<a href="#services" data-role="button">Services</a>
				<a href="#security" data-role="button">Security</a>
				<a href="#network" data-role="button">Network</a>
				<a href="#partner" data-role="button">Partner</a>
				<a href="#account" data-role="button">Account</a>
				</br>
				<a data-role="button" onClick="logout()">Logout</a>
				<a data-role="button" onClick="quit()">Quit</a>
    		</div>
    	</div>
    	<div data-role="page" id="services">
	    	<div data-role="header">
				<div>
					<h1>
						FireHost Customer Portal Services</br>Company Name
					</h1>
				</div>
			</div>
			<div data-role="content">
				<h2>
					****Give Me Content****
				</h2>
			</div>
			<script>
				$( document ).on( "pageinit", "#services", function() {
	    			$( document ).on( "swipeleft swiperight", "#services", function( e ) {
		       			// We check if there is no open panel on the page because otherwise
		        		// a swipe to close the left panel would also open the right panel (and v.v.).
				        // We do this by checking the data that the framework stores on the page element (panel: open).
				        if ( $.mobile.activePage.jqmData( "panel" ) !== "open" ) {
				            if ( e.type === "swipeleft"  ) {
				                $( "#servicesmenu" ).panel( "close" );
				            } else if ( e.type === "swiperight" ) {
				                $( "#servicesmenu" ).panel( "open" );
				            }
				        }
			    	});
				});
			</script>
			<div data-role="panel" id="servicesmenu" data-theme="a">
				<a href="#dashboard" data-role="button">Dashboard</a>
				<a href="#tickets" data-role="button">Tickets</a>
				<a href="#security" data-role="button">Security</a>
				<a href="#network" data-role="button">Network</a>
				<a href="#partner" data-role="button">Partner</a>
				<a href="#account" data-role="button">Account</a>
				</br>
				<a data-role="button" onClick="logout()">Logout</a>
				<a data-role="button" onClick="quit()">Quit</a>
    		</div>
    	</div>
    	<div data-role="page" id="security">
	    	<div data-role="header">
				<div>
					<h1>
						FireHost Customer Portal Security</br>Company Name
					</h1>
				</div>
			</div>
			<div data-role="content">
				<h2>
					****Give Me Content****
				</h2>
			</div>
			<script>
				$( document ).on( "pageinit", "#security", function() {
	    			$( document ).on( "swipeleft swiperight", "#security", function( e ) {
		       			// We check if there is no open panel on the page because otherwise
		        		// a swipe to close the left panel would also open the right panel (and v.v.).
				        // We do this by checking the data that the framework stores on the page element (panel: open).
				        if ( $.mobile.activePage.jqmData( "panel" ) !== "open" ) {
				            if ( e.type === "swipeleft"  ) {
				                $( "#securitymenu" ).panel( "close" );
				            } else if ( e.type === "swiperight" ) {
				                $( "#securitymenu" ).panel( "open" );
				            }
				        }
			    	});
				});
			</script>
			<div data-role="panel" id="securitymenu" data-theme="a">
				<a href="#dashboard" data-role="button">Dashboard</a>
				<a href="#tickets" data-role="button">Tickets</a>
				<a href="#services" data-role="button">Services</a>
				<a href="#network" data-role="button">Network</a>
				<a href="#partner" data-role="button">Partner</a>
				<a href="#account" data-role="button">Account</a>
				</br>
				<a data-role="button" onClick="logout()">Logout</a>
				<a data-role="button" onClick="quit()">Quit</a>
    		</div>
    	</div>
    	<div data-role="page" id="network">
	    	<div data-role="header">
				<div>
					<h1>
						FireHost Customer Portal Network</br>Company Name
					</h1>
				</div>
			</div>
			<div data-role="content">
				<h2>
					****Give Me Content****
				</h2>
			</div>
			<script>
				$( document ).on( "pageinit", "#network", function() {
	    			$( document ).on( "swipeleft swiperight", "#network", function( e ) {
		       			// We check if there is no open panel on the page because otherwise
		        		// a swipe to close the left panel would also open the right panel (and v.v.).
				        // We do this by checking the data that the framework stores on the page element (panel: open).
				        if ( $.mobile.activePage.jqmData( "panel" ) !== "open" ) {
				            if ( e.type === "swipeleft"  ) {
				                $( "#networkmenu" ).panel( "close" );
				            } else if ( e.type === "swiperight" ) {
				                $( "#networkmenu" ).panel( "open" );
				            }
				        }
			    	});
				});
			</script>
			<div data-role="panel" id="networkmenu" data-theme="a">
				<a href="#dashboard" data-role="button">Dashboard</a>
				<a href="#tickets" data-role="button">Tickets</a>
				<a href="#services" data-role="button">Services</a>
				<a href="#security" data-role="button">Security</a>
				<a href="#partner" data-role="button">Partner</a>
				<a href="#account" data-role="button">Account</a>
				</br>
				<a data-role="button" onClick="logout()">Logout</a>
				<a data-role="button" onClick="quit()">Quit</a>
    		</div>
    	</div>
    	<div data-role="page" id="partner">
	    	<div data-role="header">
				<div>
					<h1>
						FireHost Customer Portal Partner</br>Company Name
					</h1>
				</div>
			</div>
			<div data-role="content">
				<h2>
					****Give Me Content****
				</h2>
			</div>
			<script>
				$( document ).on( "pageinit", "#partner", function() {
	    			$( document ).on( "swipeleft swiperight", "#partner", function( e ) {
		       			// We check if there is no open panel on the page because otherwise
		        		// a swipe to close the left panel would also open the right panel (and v.v.).
				        // We do this by checking the data that the framework stores on the page element (panel: open).
				        if ( $.mobile.activePage.jqmData( "panel" ) !== "open" ) {
				            if ( e.type === "swipeleft"  ) {
				                $( "#partnermenu" ).panel( "close" );
				            } else if ( e.type === "swiperight" ) {
				                $( "#partnermenu" ).panel( "open" );
				            }
				        }
			    	});
				});
			</script>
			<div data-role="panel" id="partnermenu" data-theme="a">
				<a href="#dashboard" data-role="button">Dashboard</a>
				<a href="#tickets" data-role="button">Tickets</a>
				<a href="#services" data-role="button">Services</a>
				<a href="#sercurity" data-role="button">Security</a>
				<a href="#network" data-role="button">Network</a>
				<a href="#account" data-role="button">Account</a>
				</br>
				<a data-role="button" onClick="logout()">Logout</a>
				<a data-role="button" onClick="quit()">Quit</a>
    		</div>
    	</div>
    	<div data-role="page" id="account">
	    	<div data-role="header">
				<div>
					<h1>
						FireHost Customer Portal Account</br>Company Name
					</h1>
				</div>
			</div>
			<div data-role="content">
				<h2>
					****Give Me Content****
				</h2>
			</div>
			<script>
				$( document ).on( "pageinit", "#account", function() {
	    			$( document ).on( "swipeleft swiperight", "#account", function( e ) {
		       			// We check if there is no open panel on the page because otherwise
		        		// a swipe to close the left panel would also open the right panel (and v.v.).
				        // We do this by checking the data that the framework stores on the page element (panel: open).
				        if ( $.mobile.activePage.jqmData( "panel" ) !== "open" ) {
				            if ( e.type === "swipeleft"  ) {
				                $( "#accountmenu" ).panel( "close" );
				            } else if ( e.type === "swiperight" ) {
				                $( "#accountmenu" ).panel( "open" );
				            }
				        }
			    	});
				});
			</script>
			<div data-role="panel" id="accountmenu" data-theme="a">
				<a href="#dashboard" data-role="button">Dashboard</a>
				<a href="#tickets" data-role="button">Tickets</a>
				<a href="#services" data-role="button">Services</a>
				<a href="#security" data-role="button">Security</a>
				<a href="#network" data-role="button">Network</a>
				<a href="#partner" data-role="button">Partner</a>
				</br>
				<a data-role="button" onClick="logout()">Logout</a>
				<a data-role="button" onClick="quit()">Quit</a>
    		</div>
    	</div>
    </body>
</html>